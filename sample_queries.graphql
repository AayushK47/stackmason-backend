# Sample GraphQL Queries for StackMason Backend
# Use these queries in the GraphQL Playground at http://localhost:8000/graphql

# ==========================================
# 1. Get All Regions
# ==========================================
query GetAllRegions {
  regions {
    id
    regionCode
    regionName
  }
}

# ==========================================
# 2. Get Resources by Region (Paginated)
# ==========================================
query GetResourcesByRegion($regionId: Int!, $limit: Int, $offset: Int) {
  resourcesByRegion(regionId: $regionId, limit: $limit, offset: $offset) {
    resources {
      id
      resourceType
      documentationUrl
    }
    total
    limit
    offset
    hasMore
  }
}

# Variables for query above (first page):
# {
#   "regionId": 1,
#   "limit": 50,
#   "offset": 0
# }

# Variables for query above (second page):
# {
#   "regionId": 1,
#   "limit": 50,
#   "offset": 50
# }

# ==========================================
# 3. Get Complete Resource Details
# ==========================================
query GetResourceDetail($resourceId: Int!) {
  resourceDetail(resourceId: $resourceId) {
    id
    resourceType
    documentationUrl
    
    # Available regions for this resource
    availableRegions {
      id
      regionCode
      regionName
    }
    
    # Root-level properties
    properties {
      id
      propertyName
      documentationUrl
      updateType
      isRequired
      isList
      isMap
      primitiveType
      complexTypeId
      complexTypeName
      listAllowsDuplicates
      
      # Nested properties (for complex types)
      nestedProperties {
        id
        propertyName
        documentationUrl
        updateType
        isRequired
        isList
        isMap
        primitiveType
        complexTypeId
        complexTypeName
        listAllowsDuplicates
        
        # Third level nesting (if needed)
        nestedProperties {
          id
          propertyName
          primitiveType
          complexTypeName
          isRequired
          isList
          isMap
        }
      }
    }
    
    # Return attributes (Fn::GetAtt)
    attributes {
      id
      attributeName
      primitiveType
      isList
      listItemType
    }
  }
}

# Variables for query above:
# {
#   "resourceId": 1
# }

# ==========================================
# 4. Search Resources (Paginated)
# ==========================================
query SearchResources($query: String!, $regionId: Int, $limit: Int, $offset: Int) {
  searchResources(query: $query, regionId: $regionId, limit: $limit, offset: $offset) {
    resources {
      id
      resourceType
      documentationUrl
    }
    total
    limit
    offset
    hasMore
  }
}

# Variables for query above (search without region filter):
# {
#   "query": "S3",
#   "limit": 50,
#   "offset": 0
# }

# Variables for query above (search with region filter):
# {
#   "query": "Lambda",
#   "regionId": 1,
#   "limit": 50,
#   "offset": 0
# }

# ==========================================
# Complete User Journey Example
# ==========================================

# Step 1: User selects region
# Use: GetAllRegions query

# Step 2: User views resources for that region
# Use: GetResourcesByRegion query with selected regionId

# Step 3: User selects a resource and views details
# Use: GetResourceDetail query with selected resourceId
# This returns everything the frontend needs to render:
# - Resource type and documentation
# - All properties with full nested structure
# - All return attributes
# - Available regions

